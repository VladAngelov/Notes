# Active Directory and Group policy Lab
*Udemy Course notes*


## 17. Groups and Memberships
* Group scope:
    * Domain local - тази група ще бъде достъпна само от домейна, в който е създадена.
    * Global - може да бъде достъпена от други домейни, ако те са доверени.
    * Universal - също като Global, но могат да бъдат достъпени от други гори (forests) на доверени домейни.

* Group type:
    * Security - оказва правата в АД:
        * достъп до специфични файлове
        * сървъри
        * принтери
        * споделени файлове (споделянето им)
        * и др.
    * Distribution - се изолзва като разпределителен мейл списък:
        * *Пример* - създаване на група с име Suppport и добавяне на служители, при получаване на мейл, той ще достигне до всички.

Чрез "Member Of", може да добавяме дадена група към друга.

## 18. Disabling and Deleting User Accounts with AD
Disabling User Accounts - се осъществява чрез натискане на десен бутон върху дадения потребител и преместването му в друг OU, където ще се намират деактивираните потребители - това може да доведе до проблем с парвата на групите. В АД се променя иконката на потребителя. Активирането става по същия начин.

## 19. Group Policy
Това е инструмент, които се използва от системните администратори за бърза и лесна конфигурация на потребителите и компютрите в АД (при промяна да 1 policy, може да се отразни на много работни станции в домейна).
Чрез Group Policy, може да се имплементират настройки за сигурност за домейна.
* Пример за това:
    * Забрана за достъп до определени сървъри;
    * Забрана за достъп до определени файлове;
    * Инсталиране на софтуер;
    * Фон на десктопаа;

АД, **GPO**, съдържа разделени настройки за компютри и потребители.

> *GPO - Group Policy Object*

* AD Users & Computers -> Tools -> Group Policy Managment
    * Forest:
        * Domains - съдържа всички домейни, които са в forest-a.
        * Sites - съдържа всички сайтове, които може да са настроени чрез "active directory sites and services" (*използва се, когато сървърите физически са разположени на друго място*).
        * Group Policy Modeling
        * Group Policy 
            * Group Policy Modeling и Group Policy се изолзват за отстраняване на неизправности във всяка група.

## 20. Creating and Linking Group Policy Objects (GPOs)

GPOs съдържат настройки и конфигурации, които могат да бъдат приложени на компютри и потребители, съхраняващи се в АД.
Домейнът, може да има няколко GPOs, почти никога не съдържа само 1 GPO.
Едни GPO, може да бъде свързано или приложено многократно едновременно.
* Създаването на GPO е сходно на потребителски акаунт:
    * Group Policy Objects -> New
    * Domain -> Create a GPO in this domain, and Link it here...

При изтриване на GPO, трябва да премахнем линковете от домейните свързани с него (не е автоамтично).
Ако не е linked (свързано) в домейна, няма да има ефект в него. За да се свърже GPO, трябва чрез *Domain -> Link an Existing GPO...*
Може да се дадът права на определ потребител да редактира определено GPO.

## 21. Group Policy Precedence
*Редът или начинът, по който работят, редът или настройките, които да се приложат.*

> *LSDOE*

1. Local GP (least important) - първото, което е приложено на компютъра и е най-маловажно.
2. Site - приложените политики на сайта, презаписвайки всички конфликти, които биха възникнали между локалната и груповата политика.
3. Domain - ще бъдат над настройките на локалния сайт.
4. Organization Unit - това е всяко специфично GPO, приложено върху дадения OU.
    * Sub Organization Unit - ако има;
5. Enforced Group Policy Objects - админа избира кое да бъде Enforced GPO, то има най-голяма тежест.
> *Последно приложенотот GPO побеждава!*

### Computer vs User
Конфигурацията на потребителя побеждава, защото:
1. Първо се прилагат настройките на компютъра
2. След това тези на потребителя

> *Последно приложеното GPO побеждава!*

* Blocked Inheritance
    * OU могат да блокират наследяването;
    * Само GPO, което е в OU, ще бъде приложено;
    * Освен принудителното GPO;


## 22. Edit GPOs

Group Policy Management Editor се използва за редакция на политиките на компютър и потребител. (маркиране на *GPO -> Edit*)

## 23. Troubleshooting Group Policy with MMC
*RSOP.msc - Resultant Set of Policy*
Чрез търсене на "rsop.msc" в търсачката на компютъра или C:/Windows/System32/rsop.msc

## 24. Troubleshooting Group Policy with Command Prompt (GPResult /r)

CMD команда: | описание
-------------|---------------
gpresoult /r | */r* за репорт
gpupdate | ъпдейт на политиките
gpupdate /force | за да се ативират новите политики


Важен резултат от *gpresoult /r* e **Applied Group Policy Objects**. Чрез този резултат най-лесно се проверява дали е приложена дадена политика към компютъра, на който е стартирана командата.


## 25. Creating Non-Inheriting Organizational Unit for GPO Testing / Troubleshooting

*При промяна на политиките - добавяне или премахване на наследяване се изпълнява команда gpupdate*.
Най-лесния начин да се разбира дали има наследяване на политики, е чрез наименоване с "Non-inheriting".


## 26. Deploying a Desktop Background to your domain with a GPO (Group Policy Object)

